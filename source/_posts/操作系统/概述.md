---
title: 操作系统-概述
categories: 操作系统
abbrlink: 37501
date: 2021-09-01 22:00:00
---

操作系统是计算机系统中必不可少的核心系统软件，其他软件是建立在操作系统的基础上，并在操作系统的统一管理和支持下运行的，是用户与计算机之间的接口。

<!-- more -->

## 操作系统的基本概念

操作系统（Operating System, OS）是指控制和管理整个计算机系统的硬件和软件资源，并合理地组织调度计算机的工作和资源的分配，以提供给用户和其他软件方便的接口和环境，它是计算机系统中最基本的系统软件。

总结为：

1. 操作系统是系统资源的管理者。
2. 操作系统向上层提供方便易用的服务。
3. 操作系统是最接近硬件的一层软件。

### 操作系统是系统资源的管理者

操作系统的 4 大部分通过相互配合、协调工作来实现对计算机系统中资源的管理，安全、高效地控制任务的运行。

1. 进程管理。实质上是对处理机的执行时间进行管理，将 CPU 的事件合理地分配给每个任务，主要包括进程控制、进程同步、进程通信和进程调度。
2. 文件管理。主要包括文件存储空间管理、目录管理、文件的读/写管理和存取控制。
3. 存储管理。对主存储器空间进行管理，主要包括存储分配与回收、存储保护、地址映射和主存扩充。
4. 设备管理。对硬件设备的管理，包括对输入/输出设备的分配、启动、完成和回收。

### 操作系统向上层提供方便易用的服务

硬件只能读懂二进制指令，且提供的是不友好的交互接口。在硬件之上安装了操作系统，操作系统封装了硬件的交互接口，提供了更友好的交互接口，包括：

- 图形化用户接口（Graphical User Interface, GUI）。用户可以使用形象的图形界面进行操作，而不再需要记忆复杂的命令和参数。
- 交互式命令接口（联机命令接口）。特点是用户输入一句命令，系统执行一句命令。
- 批处理命令接口（脱机命令接口）。特点是用户输入一堆命令，系统执行一堆命令。
- 程序接口。可以在程序中进行系统调用来使用程序接口。普通用户不能直接使用程序接口，只能通过程序代码间接使用。

### 操作系统是最接近硬件的一层软件

操作系统将 CPU、内存、磁盘、显示器、键盘等硬件合理地组织起来，让各硬件能够相互协调配合，实现更多更复杂的功能。

## 操作系统的特征

操作系统的 4 个特征是并发性、共享性、虚拟性和异步性。

### 并发性

并发是指两个或多个事件在同一时间间隔内发生，这些事件宏观上是同时发生的，但微观上是交替发生的。

并行是指两个或多个事件在同一时刻同时发生，宏观和微观上都是同时发生的。

操作系统的并发性是指计算机系统中同时运行着多个程序，这些程序在宏观上看是同时运行的，而微观上看是交替运行的。

### 共享性

共享即资源共享，是指系统中的资源可供内存中多个并发执行的进程共同使用。

两种资源共享方式：

1. 互斥共享方式：系统中的某些资源，虽然可以提供给多个进程使用，但一个时间段内只允许一个进程访问该资源。如对摄像头设备的共享使用。
2. 同时共享方式：系统中的某些资源，允许一个时间段由多个进程同时对它们进行访问。如对音箱设备的共共享使用。

### 虚拟性

虚拟是指把一个物理上的实体变为若干个逻辑上的对应物。物理实体是实际存在的，而逻辑上的对应物是用户感受到的。

虚拟技术分为：

1. 空分复用技术。如虚拟存储器。
2. 时分复用技术。如虚拟处理器。

### 异步性

异步是指多道程序环境下，允许多个程序并发执行，由于并发运行的程序会争抢着使用系统资源，而系统中的资源有限，因此进程的执行不是一贯到底的，而是走走停停，以不可预知的速度向前推进。

## 操作系统的运行机制

### 两种程序

- 应用程序：普通程序员编写的程序。
- 内科程序：实现操作系统的程序就是内核程序。由很多内核程序组成了操作系统内核，简称内核（Kernel）。

### 两种指令

- 特权指令：影响重大，只允许内核使用的指令。
- 非特权指令：应用程序只能使用非特权指令。

在 CPU 设计和生产的时候就划分了特权指令和非特权指令，因此 CPU 在执行一条指令前就能判断出其类型。

### 两种处理器状态

- 内核态：CPU 处于内核态时，说明此时正在运行的是内核程序，此时可以执行特权指令。
- 用户态：CPU 处于用户态时，说明此时正在运行的是应用程序，此时只能执行非特权指令。

CPU 中有一个寄存器叫程序状态寄存器（PSW），其中有个二进制位表示处理器状态。

### 内核态与用户态的切换

- 内核态 -> 用户态：执行一条特权指令，修改 PSW 的标志位为用户态。这个动作意味着操作系统主动让出 CPU 的使用权。
- 用户态 -> 内核态：由中断引发，硬件自动完成切换过程。触发中断信号意味着操作系统将强行夺回 CPU  的使用权。

但凡需要操作系统介入的地方，都会触发中断信号。

### 中断

中断是操作系统内核夺回 CPU 使用权的唯一途径。使 CPU 由用户态切换为内核态，使操作系统重新夺回对 CPU 的使用权。

### 系统调用

系统调用是操作系统提供给应用程序使用接口，是一种可供应用程序调用的特殊函数，应用程序通过系统调用来请求获得操作系统内核的服务。

操作系统内核对共享资源进行统一的管理，向上提供系统调用，当应用程序需要使用共享资源时，只能通过系统调用的方式向操作系统内核发出请求，内核会对各个请求进行协调处理。

## 操作系统的分类及特点

操作系统分为手工操作系统、批处理操作系统、分时操作系统、实时操作系统等。

### 手工操作系统

使用纸带机进行输入，输入和输出速度慢。

- 主要缺点：用户独占全机，人机速度矛盾导致资源利用率极低。

### 批处理阶段

单道批处理系统：引入脱机输入/输出技术，但一次只有一个作业装入内存运行，当一个作业运行结束后，随即自动调入同批的下一个作业，节省了作业之间的人工干预时间，提高了资源的利用率。

- 主要优点：缓解了一定程度的人机速度矛盾，资源利用率有所提升。
- 主要缺点：内存中仅能有一道程序运行，CPU 有大量的时间是在空闲等待 I/O 完成，资源利用率依然很低。

多道批处理系统：操作系统正式诞生，用于支持多道程序并发执行。

- 主要优点：多道程序并发执行，共享计算机资源。资源利用率大幅提升。
- 主要缺点：用户响应时间长，没有人机交互功能。

### 分时操作系统

计算机以时间片为单位轮流为各个用户/作业服务，各个用户可通过终端与计算机进行交互。

- 主要优点：用户请求可以被及时响应，解决了人机交互问题。允许多个用户同时使用一台计算机，并且用户对计算机的操作相互独立，感受不到别人的存在。
- 主要缺点：不能优先处理一些紧急任务，操作系统对各个用户/作业都是完全公平的，循环地为每个用户/作业服务一个时间片，不区分任务的紧急性。

### 实时操作系统

实时是指计算机对于外来信息能够以足够快的速度进行处理，并在被控对象允许的时间范围内做出快速反应。实时系统对交互能力要求不高，但要求可靠性有保障。

实时系统分为实时控制系统和实时信息处理系统。

1. 实时控制系统主要用于生产过程的自动控制。如武器控制，自动驾驶。
2. 实时信息处理系统主要用于实时信息处理。如飞机订票系统。

- 主要优点：能够优先响应紧急任务。

